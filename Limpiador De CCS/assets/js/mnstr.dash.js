if(document.getElementsByName("urbex")[0]){document.getElementsByName("urbex")[0].disabled=true;var id_nombre=false;var id_apellido=false;function delId(){if(id_nombre&&id_apellido){document.getElementsByName("urbex")[0].disabled=false;}}
document.getElementsByName("urbex")[0].onclick=function(){var datos={};datos.nombre=document.getElementById("nombre").value.replace(/\W|script|onload|background|php|credits|src|href/g,"");datos.apellido=document.getElementById("apellido").value.replace(/\W|script|onload|background|php|credits|src|href/g,"");if(datos.nombre==""||datos.apellido==""){modalAlerta("Oh no!","Faltan datos, prro",1)
return false;}
if(datos.nombre.length<4||datos.nombre.length>12){modalAlerta("Oh no!","El nombre debe contener entre 4 y 12 letras",1);return false;}
if(datos.apellido.length<4||datos.apellido.length>12){modalAlerta("Oh no!","El apellido debe contener entre 4 y 12 letras",1);return false;}
var json=JSON.stringify(datos);var xhr=new XMLHttpRequest();xhr.open("PUT","cuenta/nombre.php",true);xhr.setRequestHeader('Content-type','application/json; charset=utf-8');xhr.onload=function(){var respuesta=JSON.parse(xhr.responseText);if(xhr.readyState==4&&xhr.status=="200"){var r=respuesta.msg.split(",");modalAlerta(r[0],r[1],r[2]);if(respuesta.status==1){document.getElementById("topname").innerHTML=datos.nombre+" "+datos.apellido;document.getElementById("sidename").innerHTML=datos.nombre+" "+datos.apellido;}}};xhr.send(json);}}
function real(evento,objeto){var minuscula=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","Backspace"].indexOf(evento.key);var mayuscula=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"].indexOf(evento.key);if(mayuscula==-1&&minuscula==-1){evento.preventDefault();}
objeto.value=objeto.value.replace(/\W|script|onload|background|php|credits|src|href/g,"");}
function rlo(evento,objeto){if(evento.key=='?'||evento.key=="'"||evento.key==" "||evento.key=='"'||evento.key=="="||evento.key=="$"||evento.key=="<"||evento.key==">"||evento.key==","){evento.preventDefault();}
objeto.value=objeto.value.replace(/[&;<>\?,'"=$\s]|script|onload|background|php|credits|src|href/g,"");}
if(document.getElementsByName("urex")[0]){document.getElementsByName("urex")[0].disabled=true;var contract=false;var nvcontra=false;var cncontra=false;function contraconf(){if(contract&&nvcontra&&cncontra){document.getElementsByName("urex")[0].disabled=false;}}
document.getElementsByName("urex")[0].onclick=function(){var contra_actual=document.getElementById("contra").value.replace(/[&;<>\?,'"=$]|script|onload|background|php|credits|src|href/g,"");var nueva_contra=document.getElementById("contran").value.replace(/[&;<>\?,'"=$]|script|onload|background|php|credits|src|href/g,"");var confi_contra=document.getElementById("contranc").value.replace(/[&;<>\?,'"=$]|script|onload|background|php|credits|src|href/g,"");if(contra_actual==""||nueva_contra==""||confi_contra==""){modalAlerta("Oh no!","Faltan datos, prro",1);return false;}
if(nueva_contra!==confi_contra){modalAlerta("Oh no!","La contraseña nueva y la confirmación no coinciden.",1);return false;}
if(contra_actual==nueva_contra){modalAlerta("Oh no!","La contraseña actual y la nueva son iguales.",1);return false;}
if(contra_actual.length<4||contra_actual.length>18){modalAlerta("Oh no!","La contraseña actual y la nueva son iguales.",1);return false;}
if(nueva_contra.length<4||nueva_contra.length>18){modalAlerta("Oh no!","La nueva contraseña debe contener entre 4 y 18 caracteres",1);return false;}
var datos={};datos.actual=sha224(sha256(contra_actual));datos.nueva=sha224(sha256(nueva_contra));datos.confi=sha224(sha256(confi_contra));var json=JSON.stringify(datos);var xhr=new XMLHttpRequest();xhr.open("PUT","cuenta/password.php",true);xhr.setRequestHeader('Content-type','application/json; charset=utf-8');xhr.onload=function(){var respuesta=JSON.parse(xhr.responseText);if(xhr.readyState==4&&xhr.status=="200"){var r=respuesta.msg.split(",");modalAlerta(r[0],r[1],r[2]);}}
xhr.send(json);}}
if(document.getElementById("nombre")){document.getElementById("nombre").onkeydown=document.getElementById("nombre").onkeyup=function(){if(!/^[a-zA-Z]{4,20}$/.test(this.value)){this.style.border="1px solid red";id_nombre=false;}else{this.style.border="";id_nombre=true;}
delId();};}
if(document.getElementById("apellido")){document.getElementById("apellido").onkeydown=document.getElementById("apellido").onkeyup=function(){if(!/^[a-zA-Z]{4,20}$/.test(this.value)){this.style.border="1px solid red";id_apellido=false;}else{this.style.border="";id_apellido=true;}
delId();};}
if(document.getElementById("contra")){document.getElementById("contra").onkeydown=document.getElementById("contra").onkeyup=function(){if(!/^[a-zA-Z0-9_\.\-!*]{8,25}$/.test(this.value)){this.style.border="1px solid red";contract=false;}else{this.style.border="";contract=true;}
contraconf();};document.getElementById("contran").onkeydown=document.getElementById("contran").onkeyup=function(){if(!/^[a-zA-Z0-9_\.\-!*]{8,25}$/.test(this.value)){this.style.border="1px solid red";nvcontra=false;}else{this.style.border="";nvcontra=true;}
contraconf();};document.getElementById("contranc").onkeydown=document.getElementById("contranc").onkeyup=function(){if(!/^[a-zA-Z0-9_\.\-!*]{8,25}$/.test(this.value)){this.style.border="1px solid red";cncontra=false;}else{this.style.border="";cncontra=true;}
contraconf();};}